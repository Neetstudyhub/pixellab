<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Posts</title>
</head>
<body>
    <h1>Blog Posts</h1>
    <div id="posts"></div>

    <script>
        async function fetchPosts() {
            const response = await fetch('https://broken-hall-68ac.earnmoney100a.workers.dev/');
            const data = await response.json();

            const postsContainer = document.getElementById("posts");
            postsContainer.innerHTML = "";

            data.items.forEach(post => {
                const postTitle = post.title;
                const postId = post.id;
                const postSlug = postTitle.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-|-$/g, '');

                const postLink = document.createElement("a");
                postLink.href = `mypost/${postSlug}`;
                postLink.innerText = postTitle;
                postLink.addEventListener("click", (event) => {
                    event.preventDefault();
                    window.location.href = `mypost/${postSlug}`;
                });

                const postElement = document.createElement("div");
                postElement.appendChild(postLink);
                postsContainer.appendChild(postElement);
            });
        }

        fetchPosts();
    </script>
</body>
</html>
